{% extends 'base.html.twig' %}

{% block title %}Épisode #{{ season.id }}
{% endblock %}

{% block body %}
{{ dump(app.user) }}

	<div class="media">
		<img class="align-self-start mr-3" src="{{ vich_uploader_asset(program) }}" alt="{{ program.title }} poster">
		<div class="media-body">
			<h1 class="mt-0">
				{{ program.title }}</h1>
			<h2>Saison
				{{ season.number }}</h2>
		</div>

		<div class="media">
			<h3>Épisode{{ episode.number }}</h3>
			<p>{{ episode.synopsis }}</p>
		</div>
	</div>

	<h3>Commentaires :</h3>
	<div class="container-fluid">
		<div class="row justify-content-evenly">
			{% for comment in comments %}
				<div class="col-sm-5 my-3">
					<p>Auteur :
						{{ comment.author.email }}</p>
					<em>Commentaire :
						{{ comment.comment }}</em>
					<p>Note :
						{{ comment.rate }}</p>
				</div>
				{% if is_granted("ROLE_ADMIN") or ("ROLE_CONTRIBUTOR") %}
					<div class="col-sm-5 my-3">
						<a href="{{ path('comment_delete', { id: comment.id }) }}">{{ include('comment/_delete_form.html.twig') }}</a>
					
					</div>
				{% endif %}
			{% endfor %}
		</div>
	</div>

	{% if app.user %}
		<a href="{{ path('comment_new') }}">Ajouter un commentaire</a>
	{% endif %}

	<a href="{{ path('program_season_show', {program: program.id, season: season.id }) }}">
		Retour à la liste des épisodes
	</a>
{% endblock %}
